# 관계형 데이터베이스의 구조
## 1. 관계형 데이터 베이스의 Realtion 구조
- 1970년 IBM에 근무하던 코드에 의해 처음 제안됨
![image](https://user-images.githubusercontent.com/65350890/107720748-56f0cc00-6d1e-11eb-9030-68a4716b9f39.png)
- 튜플, 행 , 레코드
> - 속성의 모임으로 구성됨
> - 파일 구조상 레코드(실제 데이터)와 같은 의미
> - 튜플의 수 = 카디널리티 또는 기수, 대응수

- 속성, 열 , 필드
> - 데이터베이스를 구성하는 가장 작은 논리적 단위
> - 파일 구조상의 데이터 항목 또는 데이터 필드에 해당
> - 개체의 특성을 기술
> - 속성의 수 = Degree 또는 차수

- 도메인
> - 하나의 속성이 가질수 있는 같은 타입 원자값들의 집합
> - (ex : 성별 속성의 도메인은 '남', '여'로 그외의 갑은 입력될 수 없음)

## 2. 릴레이션의 특징
- 한 릴레이션(테이블)에 포함된 튜플(행)들은 모두 상이함, 즉 서로 다른 값을 갖음
- 한 릴레이션(테이블)에 포함된 튜플(행) 사이에는 순서가 없음
- 릴레이션 스키마를 구성하는 애트리뷰터(열) 간의 순서는 중요하지 않음
- 애트리뷰트는 논리적으로 더 이상 쪼갤 수 없는 원자 값으로 저장함
- 각 애트리뷰트는 식별을 위해 릴레이션 내에서 유일한 이름을 가짐, 그러나 그에 해당하는 도메인(애트리뷰트를 구성하는 값)에는 동일한 값이 있을 수 있음(ex:'학년' 속성에는 1,2,3,4값이 중복될 수 있음)

> - 정리
> 1. 튜플은 서로 상이한 값을 갖고 ,순서가 없음
> 2. 애트리뷰트는 원자 값을 가지고 ,순서가 중요하지 않으며, 유일한 이름을 가짐

--- 
# 키
- 데이터베이스에서 튜플들을 서로 구분할 수 있는 기준이 되는 속성

## 1. 후보키(Candidate Key)
- 테이블에 있는 모든 튜플(행)에 대한 유일성과 최소성을 만족시켜야 함
- 튜플을 유일하게 식별하기 위해 사용하는 속성들의 부분 집합, 즉 기본키로 사용할 수 있는 속성들, 모든 테이블에는 반드시 하나 이상의 후보키가 존재

> - 유일성 : 하나의 키 값으로 하나의 튜플만을 유일하게 식별할 수 있어야 함
> - 최소성 : 모든 레코드들을 유일하게 식별하는 데 꼭 필요한 속성으로만 구성되어야 함

## 2. 기본키(Primary Key)
- 후보키 중에서 특별히 선정된 주(main key)로, 중복된 값과 null값을 가질 수 없음
- 후보키의 성질인 유일성과 최소성을 가지며 튜플을 식별하기 위해 반드시 필요한 키

## 3. 대체키(Alternate Key)
- 후보키가 둘 이상일 때 기본키를 제외한 나머지 후보키를 의미

## 4. 슈퍼키(Super Key)
- 한 테이블 내에 있는 속성들의 집합으로 구성된 키
- 모든 튜플에 대해 유일성은 만족시키지만, 최소성은 만족시키지 못함

## 5. 외래키(Foreign Key)
- 다른 릴레이션의 기본키를 참조하는 속성 또는 속성들의 집합
- 참조되는 릴레이션의 기본키와 대응돼 릴레이션 간의 참조 관계를 표현

---
# 무결성
- 데이터베이스에 저장된 데이터 값과 그것이 표현하는 현실 세계의 실제 값이 일치하는 정확성을 의미
## 1. 개체 무결성
- 데이블의 기본키를 구성하는 어떤 속성도 null값이나 중복 값을 가질 수 없음
- 기본키의 속성 값이 null 값이 아닌 원자 값을 갖는 성질

## 2. 도메인 무결성
- 테이블 내의 튜플(행)들이 각 성성의 도메인에 지정된 값 만을 가져야 함

## 3. 참조 무결성
- 외래키 값은 null이거나 참조 테이블의 기본키 값과 동일해야 함
- 테이블은 참조할 수 없는 외래키 값을 가질 수 없다는 규정

## 4. 사용자 정의 무결성
- 속성(열) 값들이 사용자가 정의한 제약 조건에 만족해야함

## 5. 데이터 무결성 강화
- 애플리케이션 : 데이터 생성, 수정, 삭제 시 무결성 조건을 검증하는 코드를 데이터를 조작하는 프로그램 내에 추가
- 데이터베이스 트리거 : 트리거 이벤트에 무결성 조건을 실행하는 절차형 SQL을 추가
- 제약 조건 : 데이터 베이스에 제약 조건을 설정해 무결성을 유지

---
# 관계대수 및 관계해석
## 1. 관계대수
- 관계형 데이터베이스에서 원하는 정보와 그 정보를 검색하기 위해서 어떻게 유도하는가를 기술하는 절차적인 언어

> - 순수 관계 연산자


> |연산자|기호|의미|
> |-----|:-------:|---|
> |Select|σ|조건을 만족하는 행들의 부분 집합(수평 연산)|
> |Project|π|열들의 부분 집합, 중복은 제거됨(수직 연산)|
> |Join|▷◁|두개의 테이블이 공통으로 가지고 있는 열을 이용하여 두개의 테이블을 하나로 합쳐서 새로운 테이블을 만드는 연산, 두개의 테이블의 연관된 행들을 결함|
> |Division|÷ <br> R÷S |R테이블에서 S테이블의 속성 도메인값과 일치하는 R테이블의 행들을 찾아내는 연산|

<br>

> - 일반집합 연산자

> |연산자|기호|의미|
> |---|:-----------:|---|
> |Union(합집합)|∪|두 개의 테이블의 합이 추출되고 ,중복은 제거됨|
> |intersection(교집합)|∩|두개의 테이블의 중복되는 값들만 추출|
> |Difference(차집합)|—|두개의테이블에 중복되지 않는 값들만 추출|
> |Cartesian(교차곱)|Х|두 테이블의 가능한 모든 행들의 집합, Degree는 더하고 , 카디널리티(행의 수)는 곱해서 값을 구함|

## 2. 관계 해석
- 관계 데이터모델의 제안자인 코드 가 수학의 술어 해석에 기반을 두고 관계 데이터베이스를 위해 제안
- 원하는 정보가 무엇이라는 것만 정의하는 비 절차적 특성
- 튜플 관계해석, 도메인 관계해석
- 기본적으로 관계해석과 관계대수는 관계 데이터베이스를 처리하는 기능과 능력면에서 동등
- 관계대수로 표현한 식은 관계해석으로 표현할 수 있음

|구분|구성요소|기호|설명|
|:---:|:---:|:---:|---|
|연산자|OR 연산|V|원자식 간"도는"이라는 관계로 연결|
||AND 연산|∧|원자식간"그리고"라는 관계로 연결|
||NOT연산|ㄱ|원자식에 대해 부정|
|정량자|전칭 정량자|∀|모든 가능한 행 "FOR All"|
||존재정량자|∃|어떤 행 하나라도 존재 "There Exists"|

## 3. 관계대수와 관계해석 비교
|구분|관계대수|관게해석|
|:---:|---|---|
|특징|절차적 언어(순서 명시)|비절차적 언어(계산 수식의 유연적 사용), 프레디킷 해석 기반|
|목적|어떻게 유도하는가?|무엇을 얻을 것인가?|
|종류|순수관계 연산자, 일반집합 연산자|튜플(행)관계 해석,도메인 관계해석|

---
# 정규화 ,반정규화
- 하나의 종족성이 하나의 테이블에 표현될 수 있도록 분해해가는 과정
- 데이터베이스의 논리적 설계 단계에서 수행

## 1. 정규화의 목적
- 데이터 구조의 안정성 및 무결성을 유지
- 어떠한 테이블이라도 데이터베이스 내에서 표현 가능하게 만듦
- 효과적인 검색 알고리즘 생성 가능
- 데이터 중복을 배제해 이상의 발생 방지 및 자료 저장 공간의 최소화
- 개체와 속성의 누락 여부 확인 가능
- 데이터 삽입 시 테이블을 재구성할 필요성을 줄임

## 2. 이상(Anomaly)의 개념 및 종류
- 정규화를 거치지 않아 데이터베이스 내에 데이터들이 불필요하게 중복되어 테이블 조작 시 예기치 못하게 발생하는 곤란한 현상
> - 삽입 이상 : 테이블에 데이터를 삽입할 때 의도와 상관없이 원하지 않은 값들도 함계 삽입되는 현상
> - 삭제 이상 : 테이블에서 한 행을 삭제할 때 의도와는 상관ㅇ벗는 값들도 함께 삭제되는 현상
> - 갱신 이상 : 테이블에서 행에 있는 속성 값을 갱신할 때 일부 행의 정보만 갱신되어 정보에 모순이 생기는 현상

## 3. 정규화의 원칙
- 정보의 무손실
- 분리의 원칙
- 데이터의 중복성 감소

## 4. 정규화 과정
|정규형|설명|
|:---:|---|
|1NF(제 1정규형)|테이블에 속한 모든 도메인이 원자 값만으로 되어 있는 정규형|
|2NF(제 2정규형)|테이블 R이 1NF고, 기본키가 아닌 모든 속성이 기본키에 대해 완전 함수적 종속을 만족하는, 부분적 함수 종속을 제거한 정규형|
|3NF(제 3정규형)|테이블R이 2NF고, 기본키가 아닌 모든 속성이 기본키에 대해 이행적 함수 종속 관계를 만족하지 않는 정규형 : A -> B이고 B->C일때 A->C를 만족하는 관계|
|BCNF|테이블R에서 모든 결정자가 후보키인 정규형, 모든 BCNF가 종속성을보존하는 것은 아님|
|4NF(제 4정규형)|테이블 R에 다치 종속이 성립하는 경우 R의 모든 속성이 A에 함수적 종속 관계를 만족하는 정규형|
|5NF(제 5정규형)|테이블 R의 모든 조인 종속이 R의 후보키를 통해서만 성립되는 정규형|

- _원_부이결다조_

## 5. 반정규화 개념
- 시스템의 성능 향상, 개발 및 운영의 편의성 등을 위해 정규화된 데이터 모델을 통합 , 중복, 분리하는 과정으로 의도적으로 정규화 원칙을 위배하는 행위
- 그러나 데이터의 일관성 및 정합성이 저하될 수 있음

## 6. 반정규화 방법
> - 테이블 통합 : 1:1관계, 1:N관계, 슈퍼타입/서브타입
> - 테이블 분할 : 수평분할, 수직 분할 -> 기본키의 유일성 관리가 어려워짐
> - 중복 테이블 추가 : 집계 테이블 | 진행테이블 |특정 부분만을 포함하는 테이블
> - 중복 속성 추가 : 자주 사용하는 속성을 하나 더 추가하는 것
